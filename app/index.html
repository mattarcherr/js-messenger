<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="../socket.io.js"></script>
    <script>
        var socket = io('http://192.168.1.17:3000');
        socket.emit('msg', {name: "matt", msg: "has connected"});
    </script>

    <title>Test App</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body onunload="diconnection()">
    <div id="wrapper">
    
        <div id="chatbox"></div>

        <form name="message" action="">
            <input name="usermsg" type="text" id="usermsg" />
            <input name="submitmsg" type="submit" id="submitmsg" onclick="submitFunc()" />
        </form>

        <script>
            function submitFunc(evt) {
                if (evt == null)
                {
                    evt = window.event;
                }

                evt.preventDefault();
                evt.stopPropagation();


                var msg = document.getElementById("usermsg").value;
                if (msg === "") return;

                $("#chatbox").append('<li>'+ msg +'</li>');

                var messageObj = {name: "matt", msg: msg}

                socket.emit('msg', messageObj);
                document.getElementById("usermsg").value = "";

                function disconnection() {
                    console.log("csdsa");
                    socket.emit('msg', {name: "matt", msg: "has disconnected"});
                }
            }
        </script>
    </div>
</body>


</html>